// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package zpa

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/zscaler/pulumi-zpa/sdk/go/zpa/internal"
)

// * [Official documentation](https://help.zscaler.com/zpa/about-privileged-capabilities-policy)
// * [API documentation](https://help.zscaler.com/zpa/configuring-privileged-policies-using-api)
//
// The **zpa_policy_portal_access_rule** resource creates a Privileged Portal Policy Capabilities Rule in the Zscaler Private Access cloud.
//
//	⚠️ **WARNING:**: The attribute ``ruleOrder`` is now deprecated in favor of the new resource  ``policyAccessRuleReorder``
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/zscaler/pulumi-zpa/sdk/go/zpa"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			emailUserSso, err := zpa.GetSAMLAttribute(ctx, &zpa.GetSAMLAttributeArgs{
//				Name:    pulumi.StringRef("Email_BD_Okta_Users"),
//				IdpName: pulumi.StringRef("BD_Okta_Users"),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			this, err := zpa.GetIdPController(ctx, &zpa.GetIdPControllerArgs{
//				Name: pulumi.StringRef("BD_Okta_Users"),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			a000, err := zpa.GetSCIMGroups(ctx, &zpa.GetSCIMGroupsArgs{
//				IdpName: pulumi.StringRef("BD_Okta_Users"),
//				Name:    pulumi.StringRef("A000"),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			b000, err := zpa.GetSCIMGroups(ctx, &zpa.GetSCIMGroupsArgs{
//				IdpName: pulumi.StringRef("BD_Okta_Users"),
//				Name:    pulumi.StringRef("B000"),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			_, err = zpa.NewPolicyPortalAccessRule(ctx, "example", &zpa.PolicyPortalAccessRuleArgs{
//				Name:        pulumi.String("Portal Access Rule"),
//				Description: pulumi.String("Allow portal access with specific capabilities"),
//				Action:      pulumi.String("CHECK_PRIVILEGED_PORTAL_CAPABILITIES"),
//				PrivilegedPortalCapabilities: &zpa.PolicyPortalAccessRulePrivilegedPortalCapabilitiesArgs{
//					DeleteFile:            pulumi.Bool(true),
//					AccessUninspectedFile: pulumi.Bool(true),
//					RequestApprovals:      pulumi.Bool(true),
//					ReviewApprovals:       pulumi.Bool(true),
//				},
//				Conditions: zpa.PolicyPortalAccessRuleConditionArray{
//					&zpa.PolicyPortalAccessRuleConditionArgs{
//						Operator: pulumi.String("OR"),
//						Operands: zpa.PolicyPortalAccessRuleConditionOperandArray{
//							&zpa.PolicyPortalAccessRuleConditionOperandArgs{
//								ObjectType: pulumi.String("PRIVILEGE_PORTAL"),
//								Values: pulumi.StringArray{
//									pulumi.String("216196257331387235"),
//								},
//							},
//						},
//					},
//					&zpa.PolicyPortalAccessRuleConditionArgs{
//						Operator: pulumi.String("OR"),
//						Operands: zpa.PolicyPortalAccessRuleConditionOperandArray{
//							&zpa.PolicyPortalAccessRuleConditionOperandArgs{
//								ObjectType: pulumi.String("COUNTRY_CODE"),
//								EntryValues: zpa.PolicyPortalAccessRuleConditionOperandEntryValueArray{
//									&zpa.PolicyPortalAccessRuleConditionOperandEntryValueArgs{
//										Lhs: pulumi.String("BR"),
//										Rhs: pulumi.String("true"),
//									},
//									&zpa.PolicyPortalAccessRuleConditionOperandEntryValueArgs{
//										Lhs: pulumi.String("CA"),
//										Rhs: pulumi.String("true"),
//									},
//								},
//							},
//						},
//					},
//					&zpa.PolicyPortalAccessRuleConditionArgs{
//						Operator: pulumi.String("OR"),
//						Operands: zpa.PolicyPortalAccessRuleConditionOperandArray{
//							&zpa.PolicyPortalAccessRuleConditionOperandArgs{
//								ObjectType: pulumi.String("SAML"),
//								EntryValues: zpa.PolicyPortalAccessRuleConditionOperandEntryValueArray{
//									&zpa.PolicyPortalAccessRuleConditionOperandEntryValueArgs{
//										Rhs: pulumi.String("user1@acme.com"),
//										Lhs: pulumi.String(emailUserSso.Id),
//									},
//								},
//							},
//							&zpa.PolicyPortalAccessRuleConditionOperandArgs{
//								ObjectType: pulumi.String("SCIM_GROUP"),
//								EntryValues: zpa.PolicyPortalAccessRuleConditionOperandEntryValueArray{
//									&zpa.PolicyPortalAccessRuleConditionOperandEntryValueArgs{
//										Rhs: pulumi.String(a000.Id),
//										Lhs: pulumi.String(this.Id),
//									},
//									&zpa.PolicyPortalAccessRuleConditionOperandEntryValueArgs{
//										Rhs: pulumi.String(b000.Id),
//										Lhs: pulumi.String(this.Id),
//									},
//								},
//							},
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## LHS and RHS Values
//
// | Object Type | LHS| RHS| VALUES
// |----------|-----------|----------|----------
// | PRIVILEGE_PORTAL  | `NA` | `NA` | “userPortalId“ |
// | SAML | “samlAttributeId“  | “attributeValueToMatch“ |
// | SCIM | “scimAttributeId“  | “attributeValueToMatch“  |
// | SCIM_GROUP | “scimGroupAttributeId“  | “attributeValueToMatch“  |
// | COUNTRY_CODE | [2 Letter ISO3166 Alpha2](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes)  | “"true"“ |
//
// ## Import
//
// Zscaler offers a dedicated tool called Zscaler-Terraformer to allow the automated import of ZPA configurations into Terraform-compliant HashiCorp Configuration Language.
//
// # Visit
//
// Policy access capability can be imported by using `<RULE ID>` as the import ID.
//
// For example:
//
// ```sh
// $ pulumi import zpa:index/policyPortalAccessRule:PolicyPortalAccessRule example <rule_id>
// ```
type PolicyPortalAccessRule struct {
	pulumi.CustomResourceState

	// This is for providing the rule action. Supported value: `CHECK_CAPABILITIES`
	Action pulumi.StringPtrOutput `pulumi:"action"`
	// This is for proviidng the set of conditions for the policy.
	Conditions PolicyPortalAccessRuleConditionArrayOutput `pulumi:"conditions"`
	// This is the description of the access policy.
	Description   pulumi.StringPtrOutput `pulumi:"description"`
	MicrotenantId pulumi.StringPtrOutput `pulumi:"microtenantId"`
	// This is the name of the policy rule.
	Name                         pulumi.StringOutput                                      `pulumi:"name"`
	PolicySetId                  pulumi.StringOutput                                      `pulumi:"policySetId"`
	PrivilegedPortalCapabilities PolicyPortalAccessRulePrivilegedPortalCapabilitiesOutput `pulumi:"privilegedPortalCapabilities"`
}

// NewPolicyPortalAccessRule registers a new resource with the given unique name, arguments, and options.
func NewPolicyPortalAccessRule(ctx *pulumi.Context,
	name string, args *PolicyPortalAccessRuleArgs, opts ...pulumi.ResourceOption) (*PolicyPortalAccessRule, error) {
	if args == nil {
		args = &PolicyPortalAccessRuleArgs{}
	}

	opts = internal.PkgResourceDefaultOpts(opts)
	var resource PolicyPortalAccessRule
	err := ctx.RegisterResource("zpa:index/policyPortalAccessRule:PolicyPortalAccessRule", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetPolicyPortalAccessRule gets an existing PolicyPortalAccessRule resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetPolicyPortalAccessRule(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *PolicyPortalAccessRuleState, opts ...pulumi.ResourceOption) (*PolicyPortalAccessRule, error) {
	var resource PolicyPortalAccessRule
	err := ctx.ReadResource("zpa:index/policyPortalAccessRule:PolicyPortalAccessRule", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering PolicyPortalAccessRule resources.
type policyPortalAccessRuleState struct {
	// This is for providing the rule action. Supported value: `CHECK_CAPABILITIES`
	Action *string `pulumi:"action"`
	// This is for proviidng the set of conditions for the policy.
	Conditions []PolicyPortalAccessRuleCondition `pulumi:"conditions"`
	// This is the description of the access policy.
	Description   *string `pulumi:"description"`
	MicrotenantId *string `pulumi:"microtenantId"`
	// This is the name of the policy rule.
	Name                         *string                                             `pulumi:"name"`
	PolicySetId                  *string                                             `pulumi:"policySetId"`
	PrivilegedPortalCapabilities *PolicyPortalAccessRulePrivilegedPortalCapabilities `pulumi:"privilegedPortalCapabilities"`
}

type PolicyPortalAccessRuleState struct {
	// This is for providing the rule action. Supported value: `CHECK_CAPABILITIES`
	Action pulumi.StringPtrInput
	// This is for proviidng the set of conditions for the policy.
	Conditions PolicyPortalAccessRuleConditionArrayInput
	// This is the description of the access policy.
	Description   pulumi.StringPtrInput
	MicrotenantId pulumi.StringPtrInput
	// This is the name of the policy rule.
	Name                         pulumi.StringPtrInput
	PolicySetId                  pulumi.StringPtrInput
	PrivilegedPortalCapabilities PolicyPortalAccessRulePrivilegedPortalCapabilitiesPtrInput
}

func (PolicyPortalAccessRuleState) ElementType() reflect.Type {
	return reflect.TypeOf((*policyPortalAccessRuleState)(nil)).Elem()
}

type policyPortalAccessRuleArgs struct {
	// This is for providing the rule action. Supported value: `CHECK_CAPABILITIES`
	Action *string `pulumi:"action"`
	// This is for proviidng the set of conditions for the policy.
	Conditions []PolicyPortalAccessRuleCondition `pulumi:"conditions"`
	// This is the description of the access policy.
	Description   *string `pulumi:"description"`
	MicrotenantId *string `pulumi:"microtenantId"`
	// This is the name of the policy rule.
	Name                         *string                                             `pulumi:"name"`
	PrivilegedPortalCapabilities *PolicyPortalAccessRulePrivilegedPortalCapabilities `pulumi:"privilegedPortalCapabilities"`
}

// The set of arguments for constructing a PolicyPortalAccessRule resource.
type PolicyPortalAccessRuleArgs struct {
	// This is for providing the rule action. Supported value: `CHECK_CAPABILITIES`
	Action pulumi.StringPtrInput
	// This is for proviidng the set of conditions for the policy.
	Conditions PolicyPortalAccessRuleConditionArrayInput
	// This is the description of the access policy.
	Description   pulumi.StringPtrInput
	MicrotenantId pulumi.StringPtrInput
	// This is the name of the policy rule.
	Name                         pulumi.StringPtrInput
	PrivilegedPortalCapabilities PolicyPortalAccessRulePrivilegedPortalCapabilitiesPtrInput
}

func (PolicyPortalAccessRuleArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*policyPortalAccessRuleArgs)(nil)).Elem()
}

type PolicyPortalAccessRuleInput interface {
	pulumi.Input

	ToPolicyPortalAccessRuleOutput() PolicyPortalAccessRuleOutput
	ToPolicyPortalAccessRuleOutputWithContext(ctx context.Context) PolicyPortalAccessRuleOutput
}

func (*PolicyPortalAccessRule) ElementType() reflect.Type {
	return reflect.TypeOf((**PolicyPortalAccessRule)(nil)).Elem()
}

func (i *PolicyPortalAccessRule) ToPolicyPortalAccessRuleOutput() PolicyPortalAccessRuleOutput {
	return i.ToPolicyPortalAccessRuleOutputWithContext(context.Background())
}

func (i *PolicyPortalAccessRule) ToPolicyPortalAccessRuleOutputWithContext(ctx context.Context) PolicyPortalAccessRuleOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PolicyPortalAccessRuleOutput)
}

// PolicyPortalAccessRuleArrayInput is an input type that accepts PolicyPortalAccessRuleArray and PolicyPortalAccessRuleArrayOutput values.
// You can construct a concrete instance of `PolicyPortalAccessRuleArrayInput` via:
//
//	PolicyPortalAccessRuleArray{ PolicyPortalAccessRuleArgs{...} }
type PolicyPortalAccessRuleArrayInput interface {
	pulumi.Input

	ToPolicyPortalAccessRuleArrayOutput() PolicyPortalAccessRuleArrayOutput
	ToPolicyPortalAccessRuleArrayOutputWithContext(context.Context) PolicyPortalAccessRuleArrayOutput
}

type PolicyPortalAccessRuleArray []PolicyPortalAccessRuleInput

func (PolicyPortalAccessRuleArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*PolicyPortalAccessRule)(nil)).Elem()
}

func (i PolicyPortalAccessRuleArray) ToPolicyPortalAccessRuleArrayOutput() PolicyPortalAccessRuleArrayOutput {
	return i.ToPolicyPortalAccessRuleArrayOutputWithContext(context.Background())
}

func (i PolicyPortalAccessRuleArray) ToPolicyPortalAccessRuleArrayOutputWithContext(ctx context.Context) PolicyPortalAccessRuleArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PolicyPortalAccessRuleArrayOutput)
}

// PolicyPortalAccessRuleMapInput is an input type that accepts PolicyPortalAccessRuleMap and PolicyPortalAccessRuleMapOutput values.
// You can construct a concrete instance of `PolicyPortalAccessRuleMapInput` via:
//
//	PolicyPortalAccessRuleMap{ "key": PolicyPortalAccessRuleArgs{...} }
type PolicyPortalAccessRuleMapInput interface {
	pulumi.Input

	ToPolicyPortalAccessRuleMapOutput() PolicyPortalAccessRuleMapOutput
	ToPolicyPortalAccessRuleMapOutputWithContext(context.Context) PolicyPortalAccessRuleMapOutput
}

type PolicyPortalAccessRuleMap map[string]PolicyPortalAccessRuleInput

func (PolicyPortalAccessRuleMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*PolicyPortalAccessRule)(nil)).Elem()
}

func (i PolicyPortalAccessRuleMap) ToPolicyPortalAccessRuleMapOutput() PolicyPortalAccessRuleMapOutput {
	return i.ToPolicyPortalAccessRuleMapOutputWithContext(context.Background())
}

func (i PolicyPortalAccessRuleMap) ToPolicyPortalAccessRuleMapOutputWithContext(ctx context.Context) PolicyPortalAccessRuleMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PolicyPortalAccessRuleMapOutput)
}

type PolicyPortalAccessRuleOutput struct{ *pulumi.OutputState }

func (PolicyPortalAccessRuleOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**PolicyPortalAccessRule)(nil)).Elem()
}

func (o PolicyPortalAccessRuleOutput) ToPolicyPortalAccessRuleOutput() PolicyPortalAccessRuleOutput {
	return o
}

func (o PolicyPortalAccessRuleOutput) ToPolicyPortalAccessRuleOutputWithContext(ctx context.Context) PolicyPortalAccessRuleOutput {
	return o
}

// This is for providing the rule action. Supported value: `CHECK_CAPABILITIES`
func (o PolicyPortalAccessRuleOutput) Action() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *PolicyPortalAccessRule) pulumi.StringPtrOutput { return v.Action }).(pulumi.StringPtrOutput)
}

// This is for proviidng the set of conditions for the policy.
func (o PolicyPortalAccessRuleOutput) Conditions() PolicyPortalAccessRuleConditionArrayOutput {
	return o.ApplyT(func(v *PolicyPortalAccessRule) PolicyPortalAccessRuleConditionArrayOutput { return v.Conditions }).(PolicyPortalAccessRuleConditionArrayOutput)
}

// This is the description of the access policy.
func (o PolicyPortalAccessRuleOutput) Description() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *PolicyPortalAccessRule) pulumi.StringPtrOutput { return v.Description }).(pulumi.StringPtrOutput)
}

func (o PolicyPortalAccessRuleOutput) MicrotenantId() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *PolicyPortalAccessRule) pulumi.StringPtrOutput { return v.MicrotenantId }).(pulumi.StringPtrOutput)
}

// This is the name of the policy rule.
func (o PolicyPortalAccessRuleOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v *PolicyPortalAccessRule) pulumi.StringOutput { return v.Name }).(pulumi.StringOutput)
}

func (o PolicyPortalAccessRuleOutput) PolicySetId() pulumi.StringOutput {
	return o.ApplyT(func(v *PolicyPortalAccessRule) pulumi.StringOutput { return v.PolicySetId }).(pulumi.StringOutput)
}

func (o PolicyPortalAccessRuleOutput) PrivilegedPortalCapabilities() PolicyPortalAccessRulePrivilegedPortalCapabilitiesOutput {
	return o.ApplyT(func(v *PolicyPortalAccessRule) PolicyPortalAccessRulePrivilegedPortalCapabilitiesOutput {
		return v.PrivilegedPortalCapabilities
	}).(PolicyPortalAccessRulePrivilegedPortalCapabilitiesOutput)
}

type PolicyPortalAccessRuleArrayOutput struct{ *pulumi.OutputState }

func (PolicyPortalAccessRuleArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*PolicyPortalAccessRule)(nil)).Elem()
}

func (o PolicyPortalAccessRuleArrayOutput) ToPolicyPortalAccessRuleArrayOutput() PolicyPortalAccessRuleArrayOutput {
	return o
}

func (o PolicyPortalAccessRuleArrayOutput) ToPolicyPortalAccessRuleArrayOutputWithContext(ctx context.Context) PolicyPortalAccessRuleArrayOutput {
	return o
}

func (o PolicyPortalAccessRuleArrayOutput) Index(i pulumi.IntInput) PolicyPortalAccessRuleOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *PolicyPortalAccessRule {
		return vs[0].([]*PolicyPortalAccessRule)[vs[1].(int)]
	}).(PolicyPortalAccessRuleOutput)
}

type PolicyPortalAccessRuleMapOutput struct{ *pulumi.OutputState }

func (PolicyPortalAccessRuleMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*PolicyPortalAccessRule)(nil)).Elem()
}

func (o PolicyPortalAccessRuleMapOutput) ToPolicyPortalAccessRuleMapOutput() PolicyPortalAccessRuleMapOutput {
	return o
}

func (o PolicyPortalAccessRuleMapOutput) ToPolicyPortalAccessRuleMapOutputWithContext(ctx context.Context) PolicyPortalAccessRuleMapOutput {
	return o
}

func (o PolicyPortalAccessRuleMapOutput) MapIndex(k pulumi.StringInput) PolicyPortalAccessRuleOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *PolicyPortalAccessRule {
		return vs[0].(map[string]*PolicyPortalAccessRule)[vs[1].(string)]
	}).(PolicyPortalAccessRuleOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*PolicyPortalAccessRuleInput)(nil)).Elem(), &PolicyPortalAccessRule{})
	pulumi.RegisterInputType(reflect.TypeOf((*PolicyPortalAccessRuleArrayInput)(nil)).Elem(), PolicyPortalAccessRuleArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*PolicyPortalAccessRuleMapInput)(nil)).Elem(), PolicyPortalAccessRuleMap{})
	pulumi.RegisterOutputType(PolicyPortalAccessRuleOutput{})
	pulumi.RegisterOutputType(PolicyPortalAccessRuleArrayOutput{})
	pulumi.RegisterOutputType(PolicyPortalAccessRuleMapOutput{})
}
